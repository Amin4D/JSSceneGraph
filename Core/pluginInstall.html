
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
<html>
  <head>
  <meta http-equiv="Content-Language" content="en" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>FABRIC Plugin Install</title>
    
    <meta charset="iso-8859-1"/>
    <link href="../themes/default/style.css" rel="stylesheet" type="text/css" />
    <link href="../themes/default/viewer.css" rel="stylesheet" type="text/css" />
    
    <script type="text/javascript" src="../ThirdParty/jQuery/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="../ThirdParty/jQuery/jquery-ui-1.8.5.custom.min.js"></script>

    <link type="text/css" href="../ThirdParty/jQuery/css/vader/jquery-ui-1.8.5.custom.css" rel="stylesheet" />
    
    <link rel="stylesheet" href="../ThirdParty/CodeMirror-2.11/lib/codemirror.css">
    <script src="../ThirdParty/CodeMirror-2.11/lib/codemirror.js"></script>
    <link rel="stylesheet" href="../ThirdParty/CodeMirror-2.11/theme/default.css">
    <script src="../ThirdParty/CodeMirror-2.11/mode/javascript/javascript.js"></script>


    <style type="text/css">

      #eulaContainer{
        position:absolute;
        left:10px;
        right:10px;
        top:10px;
        bottom:50px;
        padding:5px 7px 5px 5px; 
      }
      #eula{
        display:block;
        width:99%;
        height:93%;
        padding:0.5%;
        margin:0;
        border:1px solid #f0f040;
        background-color:#fffff0;
        overflow:auto;
      }
      
      #install{
        position:absolute;
        right:10px;
        bottom:10px;
      }
      

    </style>
  </head>

    <script>
    
$(document).ready(function() {
  
  $('#install').button({ disabled: true });
  
  $('#eula').attr("disabled", "disabled");
  
  var BrowserDetect = {
    init: function () {
      this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
      this.version = this.searchVersion(navigator.userAgent)
        || this.searchVersion(navigator.appVersion)
        || "an unknown version";
      this.OS = this.searchString(this.dataOS) || "an unknown OS";
    },
    searchString: function (data) {
      for (var i=0;i<data.length;i++)	{
        var dataString = data[i].string;
        var dataProp = data[i].prop;
        this.versionSearchString = data[i].versionSearch || data[i].identity;
        if (dataString) {
          if (dataString.indexOf(data[i].subString) != -1)
            return data[i].identity;
        }
        else if (dataProp)
          return data[i].identity;
      }
    },
    searchVersion: function (dataString) {
      var index = dataString.indexOf(this.versionSearchString);
      if (index == -1) return;
      return parseFloat(dataString.substring(index+this.versionSearchString.length+1));
    },
    dataBrowser: [
      {
        string: navigator.userAgent,
        subString: "Chrome",
        identity: "Chrome"
      },
      { 	string: navigator.userAgent,
        subString: "OmniWeb",
        versionSearch: "OmniWeb/",
        identity: "OmniWeb"
      },
      {
        string: navigator.vendor,
        subString: "Apple",
        identity: "Safari",
        versionSearch: "Version"
      },
      {
        prop: window.opera,
        identity: "Opera",
        versionSearch: "Version"
      },
      {
        string: navigator.vendor,
        subString: "iCab",
        identity: "iCab"
      },
      {
        string: navigator.vendor,
        subString: "KDE",
        identity: "Konqueror"
      },
      {
        string: navigator.userAgent,
        subString: "Firefox",
        identity: "Firefox"
      },
      {
        string: navigator.vendor,
        subString: "Camino",
        identity: "Camino"
      },
      {		// for newer Netscapes (6+)
        string: navigator.userAgent,
        subString: "Netscape",
        identity: "Netscape"
      },
      {
        string: navigator.userAgent,
        subString: "MSIE",
        identity: "Explorer",
        versionSearch: "MSIE"
      },
      {
        string: navigator.userAgent,
        subString: "Gecko",
        identity: "Mozilla",
        versionSearch: "rv"
      },
      { 		// for older Netscapes (4-)
        string: navigator.userAgent,
        subString: "Mozilla",
        identity: "Netscape",
        versionSearch: "Mozilla"
      }
    ],
    dataOS : [
      {
        string: navigator.platform,
        subString: "Win",
        identity: "Windows"
      },
      {
        string: navigator.platform,
        subString: "Mac",
        identity: "Mac"
      },
      {
           string: navigator.userAgent,
           subString: "iPhone",
           identity: "iPhone/iPod"
      },
      {
        string: navigator.platform,
        subString: "Linux",
        identity: "Linux"
      }
    ],
    dataCPUArch : [
      {
        string: navigator.appVersion,
        subString: "x86_64",
        identity: "x86_64"
      },
      {
        string: navigator.appVersion,
        subString: "Mac",
        identity: "Mac"
      },
      {
           string: navigator.appVersion,
           subString: "iPhone",
           identity: "iPhone/iPod"
      },
      {
        string: navigator.platform,
        subString: "Linux",
        identity: "Linux"
      }
    ]
  };
  BrowserDetect.init();

  
  var createDownloadURL = function( div ){
   
    var os, arch, ext;
    switch(BrowserDetect.OS){
      case "Mac":
        os = "Darwin";
        switch(BrowserDetect.browser){
          case "Chrome": arch = "i386"; break;
          case "Firefox": arch = "x86_64"; break;
          default:
            alert("Unsupported Browser. Fabric Alpha supports only Chrome and Firefox. Other browsers will be supported shortly");
            return false;
        }
        break;
      case "Windows":
        os = "Windows";
        arch = "x86";
        break;
      case "Linux":
        os = "Linux";
        if(navigator.appVersion.indexOf("x86_64") != -1)
             arch = "x86_64";
        else arch = "i686";
        break;
      default:
        alert("Unsupported Operating system. Fabric supports only Windows, Linux and OsX.");
        return false;
    }
    switch(BrowserDetect.browser){
      case "Chrome": ext = "crx"; break;
      case "Firefox": ext = "xpi"; break;
      default:
        alert("Unsupported Browser. Fabric supports only Chrome and Firefox.");
        return false;
    }
    return "http://dist.fabric-engine.com/1.0.10/FabricEngine-"+os+"-"+arch+"."+ext;
  }
  
  var url = createDownloadURL();
  
  if(url){
    $('#install').button({ disabled: false })
    .click(function() {
      $( "#alphaWarningDialogBox" ).dialog( "open" );
      parent.location = url;
    //  parent.location.reload();
    });
  }
  
  $("#alphaWarningDialogBox").dialog({
      autoOpen: false,
      width: 500,
      height: 250,
      modal: true,
      buttons: {
       Ok: function() {
         $( this ).dialog( "close" );
       }
     }
    });
  
});

</script>

  <body>
    <div id="wrapper">
      <ul id="nav">
        <li><a href="#" id="fabric-logo"><img src="../themes/default/_img/projects/fabric-logo.png" /></a></li>
      </ul>
      <div id="editor">
        
        <div id="eulaContainer">
        <textarea id="eula" name="eula" rows="100" cols="150">
END-USER LICENSE AGREEMENT FOR Fabric Engine

IMPORTANT PLEASE READ THE TERMS AND CONDITIONS OF THIS LICENSE AGREEMENT CAREFULLY BEFORE CONTINUING WITH THIS PROGRAM INSTALL: Fabric Technologies, Inc.'s End-User License Agreement ("EULA") is a legal agreement between you (either an individual or a single entity) and Fabric Technologies, Inc. for the Fabric Technologies, Inc. software product(s) identified above which may include associated software components, media, printed materials, and "online" or electronic documentation ("SOFTWARE PRODUCT"). By installing, copying, or otherwise using the SOFTWARE PRODUCT, you agree to be bound by the terms of this EULA. This license agreement represents the entire agreement concerning the program between you and Fabric Technologies, Inc., (referred to as "licenser"), and it supersedes any prior proposal, representation, or understanding between the parties. If you do not agree to the terms of this EULA, do not install or use the SOFTWARE PRODUCT.

The SOFTWARE PRODUCT is protected by copyright laws and international copyright treaties, as well as other intellectual property laws and treaties. The SOFTWARE PRODUCT is licensed, not sold.

1. GRANT OF LICENSE. 
The SOFTWARE PRODUCT is licensed as follows: 
(a) Installation and Use.
Fabric Technologies, Inc. grants you the right to install and use copies of the SOFTWARE PRODUCT on your computer running a validly licensed copy of the operating system for which the SOFTWARE PRODUCT was designed.
(b) Backup Copies.
You may also make copies of the SOFTWARE PRODUCT as may be necessary for backup and archival purposes.

2. DESCRIPTION OF OTHER RIGHTS AND LIMITATIONS.
(a) Maintenance of Copyright Notices.
You must not remove or alter any copyright notices on any and all copies of the SOFTWARE PRODUCT.
(b) Distribution.
You may not distribute copies of the SOFTWARE PRODUCT to third parties.
(c) Prohibition on Reverse Engineering, Decompilation, and Disassembly.
You may not reverse engineer, decompile, or disassemble the SOFTWARE PRODUCT, except and only to the extent that such activity is expressly permitted by applicable law notwithstanding this limitation. 
(d) Rental.
You may not rent, lease, or lend the SOFTWARE PRODUCT.
(e) Support Services.
Fabric Technologies, Inc. may provide you with support services related to the SOFTWARE PRODUCT ("Support Services"). Any supplemental software code provided to you as part of the Support Services shall be considered part of the SOFTWARE PRODUCT and subject to the terms and conditions of this EULA. 
(f) Compliance with Applicable Laws.
You must comply with all applicable laws regarding use of the SOFTWARE PRODUCT.

3. TERMINATION 
Without prejudice to any other rights, Fabric Technologies, Inc. may terminate this EULA if you fail to comply with the terms and conditions of this EULA. In such event, you must destroy all copies of the SOFTWARE PRODUCT in your possession.

4. COPYRIGHT
All title, including but not limited to copyrights, in and to the SOFTWARE PRODUCT and any copies thereof are owned by Fabric Technologies, Inc. or its suppliers. All title and intellectual property rights in and to the content which may be accessed through use of the SOFTWARE PRODUCT is the property of the respective content owner and may be protected by applicable copyright or other intellectual property laws and treaties. This EULA grants you no rights to use such content. All rights not expressly granted are reserved by Fabric Technologies, Inc.

5. NO WARRANTIES
Fabric Technologies, Inc. expressly disclaims any warranty for the SOFTWARE PRODUCT. The SOFTWARE PRODUCT is provided 'As Is' without any express or implied warranty of any kind, including but not limited to any warranties of merchantability, noninfringement, or fitness of a particular purpose. Fabric Technologies, Inc. does not warrant or assume responsibility for the accuracy or completeness of any information, text, graphics, links or other items contained within the SOFTWARE PRODUCT. Fabric Technologies, Inc. makes no warranties respecting any harm that may be caused by the transmission of a computer virus, worm, time bomb, logic bomb, or other such computer program. Fabric Technologies, Inc. further expressly disclaims any warranty or representation to Authorized Users or to any third party.

6. LIMITATION OF LIABILITY
In no event shall Fabric Technologies, Inc. be liable for any damages (including, without limitation, lost profits, business interruption, or lost information) rising out of 'Authorized Users' use of or inability to use the SOFTWARE PRODUCT, even if Fabric Technologies, Inc. has been advised of the possibility of such damages. In no event will Fabric Technologies, Inc. be liable for loss of data or for indirect, special, incidental, consequential (including lost profit), or other damages based in contract, tort or otherwise. Fabric Technologies, Inc. shall have no liability with respect to the content of the SOFTWARE PRODUCT or any part thereof, including but not limited to errors or omissions contained therein, libel, infringements of rights of publicity, privacy, trademark rights, business interruption, personal injury, loss of privacy, moral rights or the disclosure of confidential information.
        </textarea>
        </div><!--code-->
        
        <div id="bottomToolbar">
                 <button id="install" style="margin-top:10px;">Accept the END-USER LICENSE AGREEMENT and Install</button>
        </div><!--bottomToolbar-->
      </div> <!--editor-->
    </div><!--wrapper-->

    <div id="alphaWarningDialogBox" title="Alpha Warning">
      <div class="content">
        This is an Alpha release of Fabric Engine, and we are working continuously to improve the developer experience and the plugin plugin performance. To be notified of updates, please register
        <u><a href="http://fabric-engine.com/2011/07/looking-for-early-testers">here</a></u>.
        <br><br>
        Please refresh the page on completion of the plugin installation
      </div>
    </div>

  </body>
  
</html>
